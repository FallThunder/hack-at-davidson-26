<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .icon-preview {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            align-items: center;
        }
        .icon-size {
            text-align: center;
        }
        canvas {
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            opacity: 0.9;
        }
        .instructions {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Extension Icon Generator</h1>
        <p>This tool generates PNG icons from the SVG source for your browser extension.</p>
        
        <div class="instructions">
            <h3>Instructions:</h3>
            <ol>
                <li>Click "Generate Icons" to create PNG versions</li>
                <li>Right-click each icon and "Save image as..."</li>
                <li>Save with the correct filename (icon16.png, icon32.png, etc.)</li>
                <li>Place the PNG files in the icons/ directory</li>
            </ol>
        </div>
        
        <button onclick="generateIcons()">Generate Icons</button>
        <button onclick="downloadAll()">Download All</button>
        
        <div class="icon-preview" id="iconPreview">
            <!-- Icons will be generated here -->
        </div>
    </div>

    <script>
        const svgSource = `<svg width="128" height="128" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                </linearGradient>
            </defs>
            <circle cx="64" cy="64" r="56" fill="url(#gradient)" stroke="#fff" stroke-width="4"/>
            <path d="M40 40 L40 55 Q40 60 45 60 L55 60 Q60 60 60 55 L60 45 Q60 40 65 40 L80 40 Q85 40 85 45 L85 60 Q85 65 80 65 L70 65 Q65 65 65 70 L65 80 Q65 85 70 85 L85 85 Q90 85 90 80 L90 65 Q90 60 85 60 L85 45 Q85 35 75 35 L65 35 Q60 35 60 40 L60 50 Q60 55 55 55 L45 55 Q40 55 40 50 Z" fill="#fff" opacity="0.9"/>
            <circle cx="50" cy="50" r="3" fill="#fff"/>
            <circle cx="75" cy="75" r="3" fill="#fff"/>
        </svg>`;

        const iconSizes = [16, 32, 48, 128];

        function generateIcons() {
            const preview = document.getElementById('iconPreview');
            preview.innerHTML = '';

            iconSizes.forEach(size => {
                const div = document.createElement('div');
                div.className = 'icon-size';
                
                const canvas = document.createElement('canvas');
                canvas.width = size;
                canvas.height = size;
                
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    ctx.drawImage(img, 0, 0, size, size);
                };
                
                const svgBlob = new Blob([svgSource], {type: 'image/svg+xml'});
                const url = URL.createObjectURL(svgBlob);
                img.src = url;
                
                const label = document.createElement('p');
                label.textContent = `${size}x${size}`;
                
                const downloadBtn = document.createElement('button');
                downloadBtn.textContent = `Download ${size}px`;
                downloadBtn.onclick = () => downloadIcon(canvas, size);
                
                div.appendChild(canvas);
                div.appendChild(label);
                div.appendChild(downloadBtn);
                preview.appendChild(div);
            });
        }

        function downloadIcon(canvas, size) {
            const link = document.createElement('a');
            link.download = `icon${size}.png`;
            link.href = canvas.toDataURL();
            link.click();
        }

        function downloadAll() {
            const canvases = document.querySelectorAll('canvas');
            canvases.forEach((canvas, index) => {
                setTimeout(() => {
                    downloadIcon(canvas, iconSizes[index]);
                }, index * 500); // Stagger downloads
            });
        }

        // Generate icons on page load
        window.onload = generateIcons;
    </script>
</body>
</html>